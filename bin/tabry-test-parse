#!/usr/bin/env ruby
require_relative '../lib/tabry/runner'

raise 'Usage: tabry-test-parse config_name arg1 [arg2]...' unless ARGV.length >= 1

config_name, *args = ARGV
runner = Tabry::Runner.new(config_name: config_name)
state = runner.parse(args)
sub = runner.config.current_sub(state)

puts state
puts "Can be used with n args? #{!!sub.can_be_used_with_n_args?(state.args.length)}"
